<!DOCTYPE html>
<html lang="en">
  {{template "head" .}}
  <body>
    {{template "topbar" (dict "Bg" "true" "Authenticated" .Authenticated)}}
    <div class="w-screen min-h-screen flex flex-col items-center mt-30">
      <div class="container">
        <a href="/feed" class="text-gray-500 hover:text-gray-700 transition-colors duration-200 ease-in-out mb-4 inline-block">
          <img src="/static/img/left-chevron.svg" alt="Back to feed" class="w-6 h-6 object-cover">
        </a>
        {{if .Post}} 
        {{template "post-no-link" .Post}}
        <div id="replies" class="w-full mt-6 flex flex-col gap-6">
          {{range .Replies}}
          {{template "post-reply" .}}
          {{end}}
        </div>
        <form hx-post="/post/{{.Post.ID}}/reply" hx-target="#replies" hx-swap="beforeend" hx-on::after-request="this.reset()" class="w-full mt-6 px-4 flex flex-col gap-4">
          <textarea name="content" placeholder="Write a reply..." class="w-full h-24 p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition duration-200 ease-in-out resize-none"></textarea>
          <button type="submit" class="self-end bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-6 mb-4 rounded-lg transition duration-300 ease-in-out">Reply</button>
        </form>
        {{else}}
        <div class="w-full h-full flex flex-col items-center justify-center gap-4">
          <p class="text-gray-500 text-lg">There doesn't seem to be a post here.</p>
          <a href="/feed" class="text-purple-600 font-semibold hover:underline">Go back to the feed</a>
        </div>
        {{end}}
      </div>
    </div>
  </body>
</html>
